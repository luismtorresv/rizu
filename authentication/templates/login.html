{% extends "base.html" %}
{% load static %}

{% block title %}Login{% endblock %}
{% block body_class %}page-dashboard{% endblock %}

{% block header %}{% endblock %}

{% block content %}
<div class="dashboard-main-container">
    <div class="sidebar">
      <h3 class="sidebar-title">
        <img src="{% static 'images/rizusinfondo.png' %}" alt="Rizu Logo" class="sidebar-logo">
        <span class="sidebar-brand-text">Rizu</span>
      </h3>
      <hr class="sidebar-divider">

      <div class="sidebar-details">
        <h4 class="sidebar-details-title">Welcome Back</h4>
        <p class="sidebar-detail-item">Sign in to access your cloud management dashboard</p>
      </div>

      <div class="sidebar-footer">
        <a href="{% url 'front_page_index' %}" class="btn-signout" style="text-decoration: none; display: block; text-align: center;">
          <i class="fa-solid fa-home" style="margin-right: 0.5rem;"></i>Home
        </a>
      </div>
    </div>

    <div class="dashboard-content">
      <div class="dashboard-header">
        <h1>Sign In</h1>
      </div>

      <div class="project-card">
        <div class="project-card-header">
          <h4 class="project-card-title">
            <i class="fa-solid fa-sign-in-alt project-icon"></i>
            Login to Your Account
          </h4>
        </div>

        <div class="project-card-body">
          {% if messages %}
            <div class="auth-messages">
              {% for message in messages %}
                <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert">
                  {{ message }}
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
              {% endfor %}
            </div>
          {% endif %}

          <form method="post" class="auth-form">
            {% csrf_token %}

            <div class="form-section">
              {% for field in form %}
                <div class="mb-3">
                  <label for="{{ field.id_for_label }}" class="form-label">
                    {% if field.name == 'username' %}
                      <i class="fa-solid fa-user fa-icon"></i>
                    {% elif field.name == 'password' %}
                      <i class="fa-solid fa-lock fa-icon"></i>
                    {% endif %}
                    {{ field.label }}
                  </label>
                  {{ field }}
                  {% if field.errors %}
                    <div class="text-danger mt-1">
                      {% for error in field.errors %}
                        <small>{{ error }}</small>
                      {% endfor %}
                    </div>
                  {% endif %}
                  {% if field.help_text %}
                    <small class="form-text text-muted">{{ field.help_text }}</small>
                  {% endif %}
                </div>
              {% endfor %}
            </div>

            <div class="auth-actions">
              <button type="submit" class="btn-dashboard-action btn-create-project">
                <i class="fa-solid fa-sign-in-alt action-icon"></i>Sign In
              </button>

              <div class="auth-link">
                <p>Don't have an account? <a href="{% url 'register' %}">Create one here</a></p>
              </div>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>
{% endblock %}
